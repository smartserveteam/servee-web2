<!DOCTYPE html>
<html dir="ltr" lang="en-US">

<head>
    <!-- Metas -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="LionCoders" />
    <!-- Links -->
    <link rel="icon" type="image/png" href="#" />
    <!-- google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800" rel="stylesheet" />
    <!-- Plugins CSS -->
    <link href="css/plugin.css" rel="stylesheet" />
    <!-- style CSS -->
    <link href="css/style.css" rel="stylesheet" />
    <!--color switcher css-->
    <link rel="stylesheet" href="css/switcher/skin-aqua.css" media="screen" id="style-colors" />
    <!-- Document Title -->
    <title>Servee.io</title>
</head>

<body>
    <!--Page Wrapper starts-->
    <div class="page-wrapper">
        <!--header starts-->
        <header class="transparent scroll-hide">
            <!--Main Menu starts-->
            <div class="site-navbar-wrap v2">
                <div class="container">
                    <div class="site-navbar">
                        <div class="row align-items-center">
                            <div class="col-md-4 col-6">
                                <a class="navbar-brand" href="/"><img src="images/logo-black.png" alt="logo" class="img-fluid" /></a>
                            </div>
                        </div>
                    </div>
                    <!--mobile-menu starts -->
                    <div class="site-mobile-menu">
                        <div class="site-mobile-menu-header">
                            <div class="site-mobile-menu-close  js-menu-toggle">
                                <span class="ion-ios-close-empty"></span>
                            </div>
                        </div>
                        <div class="site-mobile-menu-body"></div>
                    </div>
                    <!--mobile-menu ends-->
                </div>
            </div>
            <!--Main Menu ends-->
        </header>
        <!--Header ends-->
        <!--User Login section starts-->
        <div class="user-login-section section-padding bg-fixed" style="background-image: url(images/header/hero-5.jpg)">
            <div class="container">
                <div class="row">
                    <div class="col-md-10 offset-md-1  text-center">
                        <div class="login-wrapper">
                            <ul class="ui-list nav nav-tabs justify-content-center mar-bot-30" role="tablist" id="tabs">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#login" role="tab" aria-selected="true">Login</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#register" role="tab" aria-selected="false">Register</a>
                                </li>
                            </ul>
                            <div class="ui-dash tab-content">
                                <div class="tab-pane fade show active" id="login" role="tabpanel">
                                    <form id="login-form" action="#" method="post">
                                        <div class="form-group">
                                            <input type="text" name="loginemail" id="loginemail" tabindex="1" class="form-control" placeholder="email" value="" required />
                                        </div>
                                        <div class="form-group">
                                            <input type="password" name="loginpassword" id="loginpassword" tabindex="2" class="form-control" placeholder="Password" />
                                        </div>
                                        <div class="row mar-top-20">
                                            <!-- <div class="col-md-6 col-12 text-left">
                                                <div class="res-box">
                                                    <input type="checkbox" tabindex="3" class="" name="remember" id="remember">
                                                    <label for="remember">Remember Me</label>
                                                </div>
                                            </div> -->
                                            <div class="col-md-6 col-12 text-right">
                                                <div class="res-box sm-left">
                                                    <a id="recoverPassword" href="forgot-password.html" tabindex="5" class="forgot-password">Forgot Password?</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="loginerror" style="display:none" class="alert alert-danger" role="alert">
                                        </div>
                                        <div class="res-box text-center mar-top-30">
                                            <button type="submit" id="loginbutton" class="btn v3"><i class="ion-log-in"></i> Log In
                                            </button>
                                            <p>
                                                Don't have an account? <a href="javascript:$('#tabs li:last-child a').tab('show')">Create one now</a>
                                            </p>
                                        </div>
                                    </form>
                                    <!-- <div class="social-profile-login text-center mar-top-30">
                                        <h5>or Login with</h5>
                                        <ul class="social-btn">
                                            <li class="bg-fb"><a href="#"><i class="ion-social-facebook"></i></a></li>
                                            <li class="bg-tt"><a href="#"><i class="ion-social-twitter"></i></a></li>
                                            <li class="bg-ig"><a href="#"><i class="ion-social-instagram"></i></a></li>
                                        </ul>
                                    </div> -->
                                </div>
                                <div class="tab-pane fade" id="register" role="tabpanel">
                                    <form id="register-form" action="#" method="post">
                                        <div class="form-group">
                                            <input type="text" required="" name="firstName" id="firstName" tabindex="2" class="form-control" placeholder="First Name" value="">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" required="" name="lastName" id="lastName" tabindex="3" class="form-control" placeholder="Last Name" value="">
                                        </div>
                                        <div class="form-group">
                                            <input type="email" required="" name="registeremail" id="registeremail" tabindex="1" class="form-control" placeholder="Email Address" value="">
                                        </div>
                                        <div class="form-group">
                                            <input type="password" required="" name="password" id="password" tabindex="4" class="form-control" placeholder="Password">
                                        </div>
                                        <div class="form-group">
                                            <input type="password" required="" name="confirm-password" id="confirm-password" tabindex="5" class="form-control" placeholder="Confirm Password" oninput="check(this, 'password')">
                                        </div>
                                        <div class="res-box text-left">
                                            <input type="checkbox" tabindex="6" class="" name="accept" id="accept">
                                            <label for="accept">I have read and accept the terms &amp;
                                                conditions</label>
                                        </div>
                                        <div id="registererror" style="display:none" class="alert alert-danger" role="alert">
                                        </div>
                                        <div class="res-box text-center mar-top-30">
                                            <button id="signUp" type="submit" disabled class="btn v3"><i class="ion-android-checkmark-circle"></i>Sign Up</button>
                                            <p>
                                                Already have an account? <a href="javascript:$('#tabs li:first-child a').tab('show')">Login now</a>
                                            </p>
                                        </div>
                                    </form>
                                    <!-- <div class="social-profile-login text-center mar-top-30">
                                        <h5>or Sign Up with</h5>
                                        <ul class="social-btn">
                                            <li class="bg-fb"><a href="#"><i class="ion-social-facebook"></i></a></li>
                                            <li class="bg-tt"><a href="#"><i class="ion-social-twitter"></i></a></li>
                                            <li class="bg-ig"><a href="#"><i class="ion-social-instagram"></i></a></li>
                                        </ul>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--User login section ends-->
            <!--Login section ends-->
            <!-- Scroll to top starts-->
            <span class="scrolltotop"><i class="ion-arrow-up-c"></i></span>
            <!-- Scroll to top ends-->
        </div>
        <!--User login section ends-->
        <!-- Code Confirmation Modal -->
        <div class="modal fade" id="confirmationModal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Enter code confirmation</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form id="confirmationForm">
                        <div class="modal-body">
                            <p>Please check your email and enter the code that you have received</p>
                            <div class="form-group">
                                <label for="code" class="col-form-label">Code:</label>
                                <input type="text" class="form-control" id="code">
                            </div>
                            <a href="#" id="resendCode">Resend code</a>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary">Send</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!--Login section ends-->
        <!-- Scroll to top starts-->
        <span class="scrolltotop"><i class="ion-arrow-up-c"></i></span>
        <!-- Scroll to top ends-->
    </div>
    <!--Page Wrapper ends-->
    <!--Footer Starts-->
    <div class="footer-wrapper no-pad-tb v2">
        <div class="footer-top-area section-padding">
            <div class="container">
                <div class="row nav-folderized">
                    <div class="col-lg-3 col-md-12">
                        <div class="footer-logo">
                            <a href="index.html"> <img src="images/logo-black.png" alt="logo"></a>
                            <div class="company-desc">
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio excepturi nam
                                    totam sequi, ipsam consequatur repudiandae libero illum.
                                </p>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-12">
                            <div class="footer-content nav">
                                <h2 class="title">Helpful Links</h2>
                                <ul class="list">
                                    <li>
                                        <a class="link-hov style2" href="#">Login</a>
                                    </li>
                                    <li>
                                        <a class="link-hov style2" href="#">My Account</a>
                                    </li>
                                    <li>
                                        <a class="link-hov style2" href="#">Add Listing</a>
                                    </li>
                                    <li>
                                        <a class="link-hov style2" href="#">Privacy policy</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-12">
                            <div class="footer-content nav">
                                <h2 class="title">Category</h2>
                                <ul class="list">
                                    <li>
                                        <a class="link-hov style2" href="#">Shop</a>
                                    </li>
                                    <li>
                                        <a class="link-hov style2" href="#">Travel</a>
                                    </li>
                                    <li>
                                        <a class="link-hov style2" href="#">Sport</a>
                                    </li>
                                    <li>
                                        <a class="link-hov style2" href="#">Restaurant</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-12">
                            <div class="footer-content nav">
                                <h2 class="title">Contact us</h2>
                                <ul class="list footer-list">
                                    <li>
                                        <div class="contact-info">
                                            <div class="icon">
                                                <i class="ion-ios-location"></i>
                                            </div>
                                            <div class="text">
                                                13th North Ave, Florida, USA
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="contact-info">
                                            <div class="icon">
                                                <i class="ion-email"></i>
                                            </div>
                                            <div class="text">
                                                <a href="#">info@listagram.com</a>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="contact-info">
                                            <div class="icon">
                                                <i class="ion-ios-telephone"></i>
                                            </div>
                                            <div class="text">
                                                +44 078 767 595
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                                <ul class="social-buttons style2">
                                    <li>
                                        <a href="#"><i class="ion-social-facebook"></i></a>
                                    </li>
                                    <li>
                                        <a href="#"><i class="ion-social-twitter"></i></a>
                                    </li>
                                    <li>
                                        <a href="#"><i class="ion-social-pinterest"></i></a>
                                    </li>
                                    <li>
                                        <a href="#"><i class="ion-social-youtube"></i></a>
                                    </li>
                                    <li>
                                        <a href="#"><i class="ion-social-dribbble"></i></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom-area">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="payment-method">
                                <img src="images/payment/payment-1.png" alt="..." />
                                <img src="images/payment/payment-2.png" alt="..." />
                                <img src="images/payment/payment-3.png" alt="..." />
                            </div>
                        </div>
                        <div class="col-md-6 text-right sm-left">
                            <ul class="additional-link">
                                <li><a href="#">Terms &amp; Condition</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                                <li><a href="login.html">Login</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Footer ends-->

    <!--Scripts starts-->
    <!--plugin js-->
    <script src="js/plugin.js"></script>
    <!--google maps-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_8C7p0Ws2gUu7wo0b6pK9Qu7LuzX2iWY&amp;libraries=places"></script>
    <!--Cookies-->
    <script src="js/js.cookie.js"></script>
    <!--Main js-->
    <script src="js/main.js"></script>
    <script src="js/amazon-cognito-identity.min.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.487.0.min.js"></script>
    <script src="js/auth.js"></script>
    <!-- This page's script -->
    <script>
        //#region Login

        $("#login-form").submit(event => {
            event.preventDefault();
            clearError();

            $("#loginbutton").prop("disabled", true);
            $("#loginbutton").html(`<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Logging you in...`);

            login().then((data) => {
                console.log("Login response:", data);
                $("#loginbutton").html(`<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Getting your info...`);
                getLoggedInUser().then((loggedInUser) => {
                    $("#loginbutton").html(`Done!`);
                    console.log("Logged In User (from login):", loggedInUser);
                    if (!loggedInUser.hasOwnProperty("phone")) {
                        $(location).attr("href", "edit-profile.html?message=incomplete");
                        return;
                    }
                    $(location).attr("href", "index.html");
                }).catch((error) => {
                    console.error("GetLoggedInUser Error:", error);
                    $("#loginbutton").html(`<i class="ion-log-in"></i> Log In`);
                    $("#loginbutton").prop("disabled", false);
                });
            }).catch((error) => {
                console.error("Login Error:", error);
                $("#loginbutton").html(`<i class="ion-log-in"></i> Log In`);
                $("#loginbutton").prop("disabled", false);
                showError("#loginerror", error.responseJSON.message);
            });
        });

        // $("#recoverPassword").click(() => {
        //     event.preventDefault();
        //     let cookiesUser = Cookies.getJSON("User");
        //     console.log("Cookies user:", cookiesUser);
        //     const username = cookiesUser.username;
        //     resendCode(username).then((result) => {
        //         console.log("Result from resend code:", result);
        //         // Show alert?
        //     }).catch((error) => {
        //         console.error("Failed to resend code:", error);
        //         showError("#registererror", error.statusText);
        //     })
        // });

        //#endregion

        //#region register

        $("#resendCode").click(() => {
            event.preventDefault();
            let cookiesUser = Cookies.getJSON("User");
            console.log("Cookies user:", cookiesUser);
            const username = cookiesUser.username;
            resendCode(username).then((result) => {
                console.log("Result from resend code:", result);
                // Show alert?
            }).catch((error) => {
                console.error("Failed to resend code:", error);
                showError("#registererror", error.statusText);
            })
        });

        $("#register-form").submit(event => {
            console.log("Registering new user...");
            event.preventDefault();
            clearError();

            check()
            $("#signUp").prop("disabled", true);
            $("#signUp").html(`<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Registering...`);

            registerUser().then((user) => {
                console.log("User registration is successful:", user);
                $("#signUp").html(`<i class="ion-android-checkmark-circle"></i>Sign Up`);
                Cookies.set("User", user);

                // Show confirmation modal dialog
                $("#confirmationModal #code").empty();
                $('#confirmationModal').modal('show');
            }).catch((error) => {
                $("#signUp").html(`<i class="ion-android-checkmark-circle"></i>Sign Up`);
                console.error("Failed to register user:", error);
                showError("#registererror", error.responseJSON.message);
            })
        });

        $('#confirmationModal').on('shown.bs.modal', function () {
            $('#code').trigger('focus')
        })

        $("#confirmationForm").submit(event => {
            event.preventDefault();
            let cookiesUser = Cookies.getJSON("User");
            console.log("Cookies user:", cookiesUser);
            const username = cookiesUser.username;
            confirmRegistrationCode(username, $("#code").val()).then((result) => {
                console.log("Result from code confirmation:", result);
                $(location).attr("href", "login.html");
            }).catch((error) => {
                console.error("Failed to confirm registration code:", error);
                showError("#registererror", error.statusText);
            })
        });

        $("#accept").change(() => {
            $("#signUp").prop("disabled", !$("#accept").is(":checked"))
        });

        //#endregion
    </script>
    <!--Scripts ends-->
</body>

</html>